ECHO Stage 3 (Collective) — Agent {agent_id}
===========================================

Scenario id: {scenario_id}
Slots (index → hour): {slots}
Feeder capacity: {capacity}
Baseline load: {baseline}
Carbon intensity: {carbon}
7-day feeder outlook:
{daily_conditions}
Weights: α={alpha}, β={beta}

Your profile
------------
Persona: {persona}
Base demand per slot: {base_demand}
Preferred slots: {preferred_slots}
Comfort penalty baseline: {comfort_penalty}

Neighbour observations
----------------------
{neighbor_examples}

Goal
----
Design Python heuristics that choose a slot for this agent on each of the next seven days to help minimise the global score:
    score(a) = α * max_t max(0, baseline[t] + EV_count[t] − capacity) + β * carbon_term(a)
while respecting the fact that you can only observe the neighbours listed above.

Output specification
--------------------
1. Load ``scenario.json`` using only paths visible from the agent directory.
2. Decide on a slot recommendation for this agent for each day that balances local comfort with global coordination.
3. Write ``global_policy_output.json`` containing a list of seven slot indices for this agent.
4. Save the executable script as ``policy.py`` so ``python policy.py`` recreates ``global_policy_output.json`` inside this folder.

Keep reasoning local
--------------------
• Do not assume knowledge of non-neighbour households.
• Explainable heuristics that can be combined with other agents will be favoured downstream.
• Your output will be compared against the globally optimal allocation for this agent.
• ``scenario.json`` is available at ``../../scenario.json`` relative to this directory—resolve it programmatically.
• Return only the Python source of ``policy.py``; omit explanations, markdown, or additional text.
